<div *ngIf="postData" class="card-container">
    <mat-card>
        <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>{{ postData.name }}</mat-card-title>
            <mat-card-subtitle>Posted by : {{ postData.user.name }} | Posted On : {{ postData.date | date:'medium'}}</mat-card-subtitle>
        </mat-card-header>
        <img mat-card-image [src]="'http://localhost:8080/uploads/' + postData.img" alt="Card Image" class="img" style="height: auto; width: 100%; max-height: 350px; object-fit: contain;">
        <mat-card-content>
            {{ postData.content }}
        </mat-card-content>
        <br>
        <!--<mat-chip *ngFor="let tag of postData.tags">{{ tag }}

        </mat-chip> -->
        <mat-card-actions>
            <button mat-raised-button color="primary" (click)="likePost()">{{postData.likeCount}}
                <mat-icon>favorite</mat-icon></button>
            <button mat-raised-button color="primary" style="margin-left: 5px;">{{postData.viewCount}}
                <mat-icon>remove_red_eye</mat-icon></button>

          <button *ngIf="postData?.user?.id === sessionUser?.id" mat-raised-button color="primary" style="margin-left: 5px;" (click)="editPost()">
              <mat-icon>edit</mat-icon></button>
          <button *ngIf="postData?.user?.id === sessionUser?.id" mat-raised-button color="primary" style="margin-left: 5px;" (click)="deletePost()">
              <mat-icon>delete</mat-icon></button>

      </mat-card-actions>
    </mat-card>


    <mat-card class="center-card" *ngIf="isEditingPost">
      <mat-card-content>
        <div class="create-post-heading">
          <h2>Update Your Post</h2>
        </div>
        <div class="form-container">
          <form [formGroup]="postForm">
            <div class="form-group">
              <label for="name"> Post Name</label>
              <input id="name" formControlName="name" class="custom-input" type="text" placeholder="Enter Name" />
            </div>

            <div class="form-group">
              <label for="img">Image</label>
              <input id="img" formControlName="img" class="custom-input" type="file" (change)="onFileSelected($event)" />
            </div>
            <div class="form-group">
              <label for="content">Content</label>
              <textarea id="content" rows="5" formControlName="content" class="custom-input" placeholder="Enter Content"></textarea>
            </div>

            <button mat-raised-button color="primary" style="float: right; margin-left: 8px;  margin-top:2%; font-family: Georgia, 'Times New Roman', Times, serif; border:1px solid darkblue; font-weight: 600;"
              (click)="updatePost()">Update Post</button>

            <button mat-raised-button color="warn" style="float: right;  margin-top:2%; border:1px solid darkblue;font-family: Georgia, 'Times New Roman', Times, serif;font-weight: 600  ;" (click)="isEditingPost = false;">Cancel</button>

          </form>
        </div>

      </mat-card-content>
    </mat-card>


    <!-- <mat-card class="comment-card">
      <mat-card-content>
        <h4>Publish Your Comment</h4>
        <div>
          <form [formGroup]="commentForm" >
            <mat-form-field appearance ="fill">
              <mat-label>Content</mat-label>
              <textarea matInput formControlName="content"></textarea>
            </mat-form-field>

            <mat-form-field appearance ="fill">
              <mat-label>Posted By</mat-label>
              <textarea matInput formControlName="postedBy"></textarea>
            </mat-form-field>

            <button mat-raised-button (click)="publishComment()" color="primary" style="float:right;" [disabled]="!commentForm.valid">Publish Comment</button>



          </form>

        </div>
      </mat-card-content>
    </mat-card> -->

    <!-- <div class="comment-wrapper"> -->
      <mat-card *ngIf="sessionUser" class="comment-card fancy-comment">
        <mat-card-content>
          <h3 class="section-title" style="font-size:1.5rem;margin-top:-3%"><!--ðŸ’¬--><mat-icon>chat</mat-icon> Publish Your Comment</h3>
          <form [formGroup]="commentForm" class="comment-form">
            <div class="form-group">
              <!-- <label for="content">Comment</label> -->
              <textarea id="content" formControlName="content" placeholder="Write something cool..."></textarea>
            </div>

            <!-- <div class="form-group">
              <label for="postedBy">Posted By</label>
              <input type="text" id="postedBy" formControlName="postedBy" placeholder="Xyz">
            </div> -->
            <!-- [disabled]="!commentForm.valid" -->

            <button mat-raised-button (click)="publishComment()" color="primary" class="publish-btn" >
              Publish Comment<mat-icon>send</mat-icon>
            </button>
          </form>
        </mat-card-content>
      </mat-card>
      <div class="comment-display-section">
        <h4 style="color:black">Comments</h4>
        <mat-card class="comment-card" *ngFor="let comment of comments" style="padding: 8px; margin-bottom: 10px;">

          <mat-card-content class="comm" style="padding: 5px 0; font-size: 17px; margin-left:7%">
            {{ comment.content }}
          </mat-card-content>

          <mat-card-header style="min-height: 50px; margin-top: -10px;">
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title class="username" style="font-size: 16px; ">{{ comment.user.name }}</mat-card-title>
            <mat-card-subtitle class="date" style="font-size: 15px;">{{ comment.createdAt | date:'medium' }}</mat-card-subtitle>
          </mat-card-header>

        </mat-card>
      </div>




    <!-- </div> -->


  </div>
